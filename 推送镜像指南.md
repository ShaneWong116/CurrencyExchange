# æ¨é€é•œåƒåˆ°é˜¿é‡Œäº‘æŒ‡å—

## âœ… å·²å®Œæˆçš„å·¥ä½œ

1. âœ… å‰ç«¯å·²æ„å»º (`frontend/dist`)
2. âœ… åç«¯é•œåƒå·²æ„å»º (`currency-backend:latest`)
3. âœ… Nginx é•œåƒå·²æ„å»º (`currency-nginx:latest`)
4. âœ… é•œåƒå·²æ ‡è®°ä¸ºé˜¿é‡Œäº‘æ ¼å¼

## ğŸ“¦ å½“å‰é•œåƒçŠ¶æ€

æŸ¥çœ‹å·²æ ‡è®°çš„é•œåƒï¼š

```powershell
docker images | findstr currencyexchange
```

åº”è¯¥çœ‹åˆ°ï¼š

- `crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/backend:latest`
- `crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/nginx:latest`

## ğŸš€ æ‰‹åŠ¨æ¨é€æ­¥éª¤

### æ­¥éª¤ 1ï¼šç™»å½•é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡

```powershell
docker login --username=å¼ åŒå­¦t134 crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com
```

å½“æç¤ºè¾“å…¥å¯†ç æ—¶ï¼Œè¾“å…¥ï¼š

```
9T.!DJe9aVxi5-u
```

### æ­¥éª¤ 2ï¼šæ¨é€åç«¯é•œåƒ

```powershell
docker push crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/backend:latest
```

### æ­¥éª¤ 3ï¼šæ¨é€ Nginx é•œåƒ

```powershell
docker push crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/nginx:latest
```

## âš ï¸ å¦‚æœç™»å½•å¤±è´¥

### å¯èƒ½åŸå› 

1. **å¯†ç å·²è¿‡æœŸ** - éœ€è¦é‡æ–°ç”Ÿæˆè®¿é—®å‡­è¯
2. **ç‰¹æ®Šå­—ç¬¦é—®é¢˜** - å¯†ç åŒ…å«ç‰¹æ®Šå­—ç¬¦

### è§£å†³æ–¹æ¡ˆ Aï¼šé‡æ–°ç”Ÿæˆè®¿é—®å‡­è¯

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ **å®¹å™¨é•œåƒæœåŠ¡** > **ä¸ªäººå®ä¾‹**
3. ç‚¹å‡» **è®¿é—®å‡­è¯**
4. é‡ç½®å¯†ç 
5. ä½¿ç”¨æ–°å¯†ç ç™»å½•

### è§£å†³æ–¹æ¡ˆ Bï¼šä½¿ç”¨ Docker Desktop ç™»å½•

1. æ‰“å¼€ Docker Desktop
2. ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡
3. é€‰æ‹© **Registries**
4. æ·»åŠ ç§æœ‰ä»“åº“ï¼š
   - **Registry URL**: `crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com`
   - **Username**: `å¼ åŒå­¦t134`
   - **Password**: `9T.!DJe9aVxi5-u`

## ğŸ”„ å®Œæ•´è‡ªåŠ¨åŒ–è„šæœ¬

åˆ›å»º `push_to_aliyun.bat`ï¼š

```bat
@echo off
echo ============================================
echo   æ¨é€é•œåƒåˆ°é˜¿é‡Œäº‘
echo ============================================
echo.

REM è®¾ç½®å˜é‡
set REGISTRY=crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com
set NAMESPACE=currencyexchange
set PROJECT=currency_exchange

echo [æ­¥éª¤ 1] ç™»å½•é˜¿é‡Œäº‘...
docker login --username=å¼ åŒå­¦t134 %REGISTRY%
if %ERRORLEVEL% NEQ 0 (
    echo [é”™è¯¯] ç™»å½•å¤±è´¥
    pause
    exit /b 1
)
echo [æˆåŠŸ] ç™»å½•æˆåŠŸ
echo.

echo [æ­¥éª¤ 2] æ¨é€åç«¯é•œåƒ...
docker push %REGISTRY%/%NAMESPACE%/%PROJECT%/backend:latest
if %ERRORLEVEL% NEQ 0 (
    echo [é”™è¯¯] åç«¯é•œåƒæ¨é€å¤±è´¥
    pause
    exit /b 1
)
echo [æˆåŠŸ] åç«¯é•œåƒæ¨é€å®Œæˆ
echo.

echo [æ­¥éª¤ 3] æ¨é€ Nginx é•œåƒ...
docker push %REGISTRY%/%NAMESPACE%/%PROJECT%/nginx:latest
if %ERRORLEVEL% NEQ 0 (
    echo [é”™è¯¯] Nginx é•œåƒæ¨é€å¤±è´¥
    pause
    exit /b 1
)
echo [æˆåŠŸ] Nginx é•œåƒæ¨é€å®Œæˆ
echo.

echo ============================================
echo   æ¨é€å®Œæˆï¼
echo ============================================
echo.
echo [é•œåƒåœ°å€]
echo   åç«¯: %REGISTRY%/%NAMESPACE%/%PROJECT%/backend:latest
echo   Nginx: %REGISTRY%/%NAMESPACE%/%PROJECT%/nginx:latest
echo.

pause
```

## ğŸ“‹ éªŒè¯æ¨é€

æ¨é€å®Œæˆåï¼Œåœ¨é˜¿é‡Œäº‘æ§åˆ¶å°éªŒè¯ï¼š

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ **å®¹å™¨é•œåƒæœåŠ¡** > **ä¸ªäººå®ä¾‹**
3. æ‰¾åˆ° **currencyexchange/currency_exchange** ä»“åº“
4. åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªé•œåƒï¼š
   - `backend:latest`
   - `nginx:latest`

## ğŸŒ ä»è¿œç¨‹éƒ¨ç½²

æ¨é€æˆåŠŸåï¼Œåœ¨ä»»ä½•æœºå™¨ä¸Šéƒ¨ç½²ï¼š

```powershell
# 1. æ‹‰å–é•œåƒ
docker pull crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/backend:latest
docker pull crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/nginx:latest

# 2. æ›´æ–° docker-compose.yml ä¸­çš„é•œåƒåœ°å€
# backend.image æ”¹ä¸º: crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/backend:latest
# nginx.image æ”¹ä¸º: crpi-nsc415g542h2toto.cn-shenzhen.personal.cr.aliyuncs.com/currencyexchange/currency_exchange/nginx:latest

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d
```

## ğŸ”§ åŒ…å«çš„æ”¹è¿›

è¿™æ¬¡æ¨é€çš„é•œåƒåŒ…å«ï¼š

### åç«¯æ”¹è¿›

- âœ… å®Œå–„çš„ç™»å½•é”™è¯¯å¤„ç†
- âœ… æ˜ç¡®çš„ HTTP çŠ¶æ€ç ï¼ˆ401, 403, 422, 500ï¼‰
- âœ… ç»“æ„åŒ–é”™è¯¯å“åº”
- âœ… é”™è¯¯æ—¥å¿—è®°å½•

### å‰ç«¯æ”¹è¿›

- âœ… çº¢è‰²é”™è¯¯æ¨ªå¹…æç¤º
- âœ… å­—æ®µçº§é”™è¯¯æ˜¾ç¤º
- âœ… æ™ºèƒ½é”™è¯¯åˆ†ç±»
- âœ… è‡ªåŠ¨æ¸…é™¤é”™è¯¯æç¤º
- âœ… æ›´æ–°æ­£ç¡®çš„æµ‹è¯•è´¦å·ï¼ˆabc123 / 123456ï¼‰

### é…ç½®ä¿®å¤

- âœ… Nginx FastCGI æ­£ç¡®ä»£ç†
- âœ… å‰ç«¯è·¯å¾„ç»Ÿä¸€ä¸º `/usr/share/nginx/html`
- âœ… ä¿®å¤ 404 é—®é¢˜

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **ç™»å½•å¤±è´¥**ï¼šé‡æ–°ç”Ÿæˆè®¿é—®å‡­è¯
2. **æ¨é€è¶…æ—¶**ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥
3. **æƒé™æ‹’ç»**ï¼šç¡®è®¤ç”¨æˆ·æœ‰æ¨é€æƒé™

---

**åˆ›å»ºæ—¶é—´**ï¼š2025-11-03 18:35  
**é•œåƒç‰ˆæœ¬**ï¼šlatest  
**åŒ…å«æ”¹è¿›**ï¼šç™»å½•é”™è¯¯å¤„ç† + Nginx é…ç½®ä¿®å¤
