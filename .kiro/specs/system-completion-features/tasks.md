# 实施计划

- [ ] 1. 数据库结构扩展和基础设施准备
  - 为交易记录表添加transaction_label字段用于即时买断标识
  - 创建balance_carry_forward表存储日结后的结余记录
  - 创建other_expenses表存储月结年结的其他支出
  - 创建cleanup_logs表记录数据清理操作日志
  - _需求: 1.6, 2.6, 3.6, 5.7, 8.2_

- [ ] 2. 即时买断交易类型标识功能实现
  - 修改现有即时买断交易创建逻辑，为生成的入账和出账记录添加"即时买断"标签
  - 实现交易记录按类型标签筛选的后端API
  - 在前端交易列表中显示交易类型标签
  - 编写即时买断标签功能的单元测试
  - _需求: 8.1, 8.2, 8.3, 8.4, 8.5_

- [ ] 3. 日结报告生成和Excel导出功能
  - 实现日结数据计算逻辑（渠道余额、利润计算）
  - 创建Excel导出服务，生成包含所有渠道余额和利润的报告
  - 实现日结完成后将各渠道余额保存为结余记录的功能
  - 创建日结API接口，支持报告生成和Excel导出
  - 编写日结功能的单元测试和集成测试
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_

- [ ] 4. 月结报告生成和其他支出管理
  - 实现月结数据统计逻辑（按日期汇总收入支出）
  - 创建其他支出管理界面，支持添加支出名称和金额
  - 实现月结Excel导出，包含日期、本金、收入、支出、其他支出、利润列
  - 创建月结API接口，支持其他支出录入和报告导出
  - 编写月结功能的单元测试
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7_

- [ ] 5. 年结报告生成和其他支出管理
  - 实现年结数据统计逻辑（按月份汇总收入支出）
  - 复用其他支出管理组件，适配年结场景
  - 实现年结Excel导出，包含月份、本金、收入、支出、其他支出、利润列
  - 创建年结API接口，支持其他支出录入和报告导出
  - 编写年结功能的单元测试
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7_

- [ ] 6. 首页本金显示逻辑优化
  - 修改首页本金计算逻辑，改为所有渠道昨日结余的总和
  - 实现本金数据的实时更新机制
  - 处理无历史余额时的零值显示
  - 编写本金显示功能的单元测试
  - _需求: 4.1, 4.2, 4.3_

- [ ] 7. 数据清理功能实现
  - 创建数据清理页面，支持时间范围和内容类型的多选
  - 实现二次验证密码功能
  - 创建数据清理后端服务，支持按条件批量删除数据
  - 实现数据清理操作日志记录
  - 添加数据清理确认对话框和成功提示
  - 编写数据清理功能的安全性测试
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7_

- [ ] 8. 底部导航组件开发
  - 创建BottomNavigation.vue组件，支持三个导航项
  - 实现导航项点击切换和活动状态高亮
  - 确保导航样式在所有页面保持一致
  - 集成Vue Router实现页面路由切换
  - 编写底部导航组件的单元测试
  - _需求: 6.1, 6.2, 6.3, 6.4_

- [ ] 9. 交易记录页面开发
  - 创建RecordsPage.vue组件，包含头部、统计卡片和交易列表
  - 实现今日统计数据的API调用和显示
  - 实现按货币和按渠道的Top3统计显示
  - 创建交易记录列表组件，支持滚动查看
  - 在交易记录中显示类型标签（如即时买断）
  - 编写交易记录页面的组件测试
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7_

- [ ] 10. 首页集成和路由配置
  - 配置Vue Router，设置首页、记录页、个人页路由
  - 确保现有HomePage.vue在新导航结构中正常工作
  - 实现底部导航与现有首页功能的无缝集成
  - 测试导航切换时首页功能的完整性
  - 编写首页集成的端到端测试
  - _需求: 9.1, 9.2, 9.3, 9.4_

- [ ] 11. 系统集成测试和优化
  - 执行所有新功能的集成测试
  - 测试Excel导出功能在不同数据量下的性能
  - 验证数据清理功能的安全性和完整性
  - 测试前端导航在不同设备上的响应式表现
  - 进行用户验收测试，确保所有需求得到满足
  - 优化系统性能，处理发现的问题
  - _需求: 所有需求的综合验证_