# 需求文档

## 介绍

本文档概述了货币兑换系统前台交易录入功能的修改需求。系统需要简化现有功能，专注于三种核心交易类型：入账、出账和即时买断，同时提供草稿管理功能。

## 需求

### 需求 1

**用户故事：** 作为用户，我希望能够删除现有的交易历史和今日统计功能，以便简化界面并专注于核心交易录入功能。

#### 验收标准

1. 当用户访问前台时，系统不应当显示交易历史功能
2. 当用户访问前台时，系统不应当显示今日统计功能
3. 当界面加载时，系统应当仅显示交易录入相关功能

### 需求 2

**用户故事：** 作为用户，我希望能够进行入账交易录入，以便记录人民币存入和港币扣除的操作。

#### 验收标准

1. 当选择入账类型时，系统应当显示入账交易录入表单
2. 当填写入账信息时，系统应当要求输入人民币金额、港币金额、汇率、支付渠道、备注字段
3. 当输入金额时，系统应当自动计算汇率为人民币金额/港币金额，并允许用户编辑
4. 当上传图片时，系统应当支持图片上传功能（可选）
5. 当完成录入时，系统应当在底部显示"存为草稿"和"提交录入"按钮
6. 当点击存为草稿时，系统应当将交易信息保存到草稿箱并返回交易录入页面
7. 当点击提交录入时，系统应当将交易信息保存到数据库并返回交易录入页面

### 需求 3

**用户故事：** 作为用户，我希望能够进行出账交易录入，以便记录人民币扣除和港币存入的操作。

#### 验收标准

1. 当选择出账类型时，系统应当显示出账交易录入表单
2. 当填写出账信息时，系统应当要求输入人民币金额、港币金额、汇率、支付渠道、备注字段
3. 当输入金额时，系统应当自动计算汇率为人民币金额/港币金额，并允许用户编辑
4. 当上传图片时，系统应当支持图片上传功能（可选）
5. 当完成录入时，系统应当在底部显示"存为草稿"和"提交录入"按钮
6. 当点击存为草稿时，系统应当将交易信息保存到草稿箱并返回交易录入页面
7. 当点击提交录入时，系统应当将交易信息保存到数据库并返回交易录入页面

### 需求 4

**用户故事：** 作为用户，我希望能够进行即时买断交易录入，以便同时记录一次入账和一次出账操作。

#### 验收标准

1. 当选择即时买断类型时，系统应当显示即时买断交易录入表单
2. 当填写即时买断信息时，系统应当要求输入人民币金额、港币金额、汇率、即时买断汇率、支付渠道、备注字段
3. 当输入金额时，系统应当自动计算汇率为人民币金额/港币金额，并允许用户编辑
4. 当输入即时买断汇率时，系统应当允许用户输入出账汇率
5. 当上传图片时，系统应当支持图片上传功能（可选）
6. 当完成录入时，系统应当在底部显示"存为草稿"和"提交录入"按钮
7. 当点击提交录入时，系统应当生成两条记录：一条入账记录（人民币金额、港币金额、汇率）和一条出账记录（人民币金额、港币金额用人民币/即时汇率计算、即时汇率）
8. 当计算出账港币金额时，系统应当使用公式：出账港币金额 = 人民币金额 / 即时买断汇率

### 需求 5

**用户故事：** 作为用户，我希望能够管理草稿箱中的交易信息，以便编辑和删除未提交的交易。

#### 验收标准

1. 当点击草稿箱时，系统应当进入草稿箱页面
2. 当查看草稿箱时，系统应当展示草稿箱中的所有交易信息
3. 当选择编辑操作时，系统应当进入交易录入页面并加载草稿数据
4. 当完成编辑时，系统应当返回草稿箱页面
5. 当选择删除操作时，系统应当删除草稿箱中的交易信息
6. 当删除完成时，系统应当返回草稿箱页面并刷新列表

### 需求 6

**用户故事：** 作为用户，我希望能够在各个页面之间导航，以便方便地返回到上一级页面。

#### 验收标准

1. 当在任何页面时，系统应当提供返回按钮
2. 当点击返回时，系统应当返回到上一级页面
3. 当从交易录入页面返回时，系统应当返回到交易类型选择页面
4. 当从草稿箱页面返回时，系统应当返回到主页面

### 需求 7

**用户故事：** 作为用户，我希望系统能够正确处理即时买断的业务逻辑，以便准确记录复杂的兑换交易。

#### 验收标准

1. 当处理入账逻辑时，系统应当将人民币存入指定账户，同时将港币从指定账户扣除
2. 当处理出账逻辑时，系统应当将人民币从指定账户扣除，同时将港币存入指定账户
3. 当处理即时买断时，系统应当同时进行一次入账和出账操作
4. 当生成入账记录时，系统应当使用用户输入的人民币金额、港币金额和汇率
5. 当生成出账记录时，系统应当使用相同的人民币金额、计算得出的港币金额（人民币金额/即时买断汇率）和即时买断汇率
6. 当计算示例时，如果人民币9600，港币10000，汇率0.96，即时汇率0.95，则应当生成入账记录（9600人民币，10000港币，0.96汇率）和出账记录（9600人民币，10105.2632港币，0.95汇率）